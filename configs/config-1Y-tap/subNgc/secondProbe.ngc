%
#4060=1

O016 if [#4082 EQ 1]
t1m6
O016 endif

(####################主轴处理######################)
#1005=0
#5399=-1
O331 if [#4000 eq 0]
m66P8L0Q0
O333 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O333 endif 
O331 else if [#4000 eq 1]
m66P9L0Q0
O333 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O333 endif 
O331 else if [#4000 eq 2]
m66P8L0Q0
O333 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O333 else 
m66P9L0Q0
O334 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O334 endif
O333 endif

O331 endif

#4010=0

m64 p0

G53G90 G0 Z0

G53G90 G1 Z0 F[#4004]
G53G90 G1 X[#4005] Y[#4006]F[#4004]
G53G90 G1 Z[#4007] F[#4016]

m65 p0
G38.2 Z[#4009-#[5203+#5220*20]] F[#4089]

#1001=0
O102 repeat [#4001] 
G53G90 G1 Z[#5063+2] F[#4089]
G38.2 Z[#4009-#[5203+#5220*20]] F[#4008]
O112 if [#1001 eq 0]
#4014=#5063
#1001=[#1001+1]
O112 endif
#4010=[#4010+#5063-#4011]
O102 endrepeat 
O113 if [[#4014-#5063] GT #4015]
(debug,两次对刀的值大于对刀容差，请重新对刀)
M30
O113 endif
O114 if [[#4014-#5063] LT [0-#4015]]
(debug,两次对刀的值大于对刀容差，请重新对刀)
M30
O114 endif

(#####################Z1############################)
#4013=[#4010/#4001]        (Z1轴对刀重设坐标)
#100=[#4013-#[4303+[5*#4288]]]
#200=[#[5203+#5220*20]+#100]
#[4303+[5*#4288]]=#4013
G10 l2 p[#5220] Z[#200]

(####################Z1#############################)

#4010=0
G53G90 G1 Z0 F[#4004]

O005 endif

m30
%

