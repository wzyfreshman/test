%
#4060=1

O016 if [#4082 EQ 1]
t1m6
O016 endif


(####################主轴处理######################)
#1005=0
#5399=-1
O331 if [#4000 eq 0]
m66P8L0Q0
O333 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O333 endif 
O331 else if [#4000 eq 1]
m66P9L0Q0
O333 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O333 endif 
O331 else if [#4000 eq 2]
m66P8L0Q0
O333 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O333 else 
m66P9L0Q0
O334 if [#5399 eq 1]
(debug,关闭主轴)
m5
m9
G4p[#4072]
#1005=1
O334 endif
O333 endif

O331 endif



#4010=0

m64 p0

G53G90 G0 Z0

#1001=[#4009-#[5204+#5220*20]]


G53G90 G1 Z0 F[#4004]
G53G90 G1 X[#4005] Y[#4006]F[#4004] 
G53G90 G1 Z[#4007] F[#4016]

m65 p0
G38.2 Z[#4009-#[5203+#5220*20]] F[#4089]

#1001=0
O101 repeat [#4001] 
G53G90 G1 Z[#5063+2] F[#4089]
G38.2 Z[#4009-#[5203+#5220*20]] F[#4008]
O112 if [#1001 eq 0]
#4014=#5063
#1001=[#1001+1]
O112 endif
#4010=[#4010+#5063]
O101 endrepeat 

O113 if [[#5063-#4014] GT #4015]
(debug,两次对刀的值大于对刀容差，请重新对刀)
M30
O113 endif
O114 if [[#5063-#4014] LT [0-#4015]]
(debug,两次对刀的值大于对刀容差，请重新对刀)
M30
O114 endif
#4011=[#4010/#4001]
(debug,Z1第一次对刀值:#4011)
#4010=0

(####################Z1#############################)
#[4303+[5*#4288]]=#4011
(#################################################)


G53G90 G1 Z0 F[#4004]
O201 endif

G53G90 G1 Z0 F[#4004]
m65 p0

(N1015	自动对刀完成后，移动到固定点的标志)
O005 if [#4021 EQ 1]
G53G90G01Z0F[#4023]
G53G90G01X[#4024]Y[#4025]F[#4023]
G53G90G01Z[#4026]F[#4023]
O005 else if [#4021 EQ 2]
G01X[#4027]Y[#4028]F[#4023]

(Z1+Z2轴模式)
O014 if [#4000 EQ 2]
O030 if [#[5209+#5220*20] LT #[5204+#5220*20]]
#<MAXZ> = #[5209+#5220*20]
O030 else
#<MAXZ> = #[5204+#5220*20]
O030 endif

O015 if [#4029+#<MAXZ> LT 0]
G01Z[#4029]F[#4031]
O015 else
G53G90G01Z0F[#4031]
O015 endif
O014 endif


O010 if [#4000 NE 2]
O011 if [#4029+#[5203+#5220*20] LT 0]
G01Z[#4029]F[#4031]
O011 else
G53G90G01Z0F[#4031]
O011 endif
O010 endif

O005 endif

m30

%

