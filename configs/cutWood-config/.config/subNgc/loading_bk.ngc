
(######半自动上料.part1#######)

	M5
	M9
	m65p18
	
	(####复位输出IO####)
	#3678=1
	(前后靠挡气缸)
	m65p13
	(后整料气缸)
	m65p14
	(侧整料杆气缸)
	m65p15
	(侧整料气缸)
	m65p16
	(夹料气缸)
	m65p17

	(##检测前后靠挡气缸上到位##)
	m66p10l3q10
	O001 if[#5399 eq -1]
	(debug,上料前复位前后靠挡没有检测到上到位信号，退出运行！)
	m30
	O001 endif

	(##检测后整料气缸退到位##)
	m66p11l3q10
	O001 if[#5399 eq -1]
	(debug,上料前复位前整料没有检测到退到位信号，退出运行！)
	m30
	O001 endif

	(##检测侧整料杆气缸收回到位##)
	m66p12l3q10
	O001 if[#5399 eq -1]
	(debug,上料前复位侧整料杆没有检测到收回到位信号，退出运行！)
	m30
	O001 endif

	(##检测侧整料气缸退到位##)
	m66p13l3q10
	O001 if[#5399 eq -1]
	(debug,上料前复位侧整料没有检测到退到位信号，退出运行！)
	m30
	O001 endif

	(##检测夹料气缸退到位##)
	m66p14l3q10
	O001 if[#5399 eq -1]
	(debug,上料前复位夹料没有检测到退到位信号，退出运行！)
	m30
	O001 endif



	(####XY起始位置####)
	#3678=2
	G53 G90 G0 Z0 A0
	(行程中间,后续可用#3685,#3686)
	#<x_init>=[[#4051-#4052]/2]   
	/G53 G90 G0 X[#3685] Y[#3686]
	G53 G90 G0  Y0		

	(##X夹料正向移动##)
	G53G90 G0 X[[#3692]+[#3691]+[#3693]]

	(##A轴下降点##)
	G53 G90 G0 A[#3694]

	(##X夹料正向移动##)
	G53G90 G0 X[[#3692]+[#3691]]

	(启用升降台)
	#3678=3

	(夹料)
	#3678=4

	m00
(###############part.2#################)
	(侧整料杆气缸)
	m64p15
	g4p[#3700]

	(后整料气缸)
	m64p14
	g4p[#3701]
	m65p14
	g4p[#3701]

	(侧整料气缸)
	m64p16
	g4p[#3702]

	(后整料气缸)
	m64p14
	g4p[#3701]
	m65p14
	g4p[#3701]

	(前后靠挡气缸)
	m64p13
	(下压延时)
	g4p[#3689]

	(侧整料气缸)
	m65p16
	(##检测侧整料气缸退到位##)
	m66p13l3q10
	O001 if[#5399 eq -1]
	(debug,关闭侧整料没有检测到退到位信号，退出运行！)
	m30
	O001 endif

	(侧整料杆气缸)
	m65p15
	(##检测侧整料杆气缸收回到位##)
	m66p12l3q10
	O001 if[#5399 eq -1]
	(debug,关闭侧整料杆没有检测到收回到位信号，退出运行！)
	m30
	O001 endif
 
	(##X正向避让##)
	G91 G0 X[#3693]
	(##A轴抬起A0##)
	G53 G90 G0 A0



	(加工)
	#3678=5